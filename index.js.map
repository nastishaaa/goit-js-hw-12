{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.list');\n\nexport function renderImages(images) {\n    return images.map(imgTemplate).join('');\n\n}\n\nexport function imgTemplate(img) {\n    return `\n    <li class='elem-list'>\n        <div class=\"gallery\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" loading=\"lazy\" alt=\"${img.tags}\" title=\"${img.tags}\" class='image'/>\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${img.likes}</p>\n                <p><strong>Views:</strong> ${img.views}</p>\n                <p><strong>Comments:</strong> ${img.comments}</p>\n                <p><strong>Downloads:</strong> ${img.downloads}</p>\n            </div>\n        </div>\n        </li>`;\n}","import { renderImages } from './render-function.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nconst list = document.querySelector('.list'); \nconst btnMore = document.querySelector('.btn-more');\n\nlet page = 1;\nlet limit = 15;\nbtnMore.style.display = 'none';\nif (loader) loader.style.display = 'none';\n\nconst key = '48428320-38598d28b4d5228a2fffcb2e3'; \nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function findMyFetch(query, page = 1, limit = 20, append = false) {\n\n    if (loader) loader.style.display = ''; \n    \n    const url = `${baseUrl}?key=${key}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${limit}&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data; \n\n        if (loader) loader.style.display = 'none';\n\n        if (!data.hits || data.hits.length === 0) {\n            // list.innerHTML = '';\n            btnMore.style.display = 'none';\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                timeout: 5000, \n                position: 'topRight',\n            });\n            return\n        } else {\n            const markup = renderImages(data.hits);\n            if (append) {\n                list.insertAdjacentHTML('beforeend', markup);\n            } else {\n                list.innerHTML = markup;\n            }\n\n            const lightbox = new SimpleLightbox('.list a', { \n                captions: true, \n                captionsData: 'alt', \n                captionDelay: 250, \n                animationSlide: true, \n            });\n            lightbox.refresh();\n            btnMore.style.display = '';\n        }\n\n        return data;\n    } catch(error) {\n        btnMore.style.display = 'none';\n        iziToast.error({\n            message: error.message,\n            timeout: 5000, \n            position: 'topRight',\n        });\n        if (loader) loader.style.display = 'none';\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { findMyFetch } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-function.js';\n\nconst input = document.querySelector('#text');\nconst list = document.querySelector('.list'); \nconst btn = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn-more');\n\nbtnMore.style.display = 'none';\n\nloader.style.display = 'none';\nlet page = 1;\nlet limit = 15;\nlet val = '';\n\n\n\ninput.addEventListener('input', ev =>{\n    val = ev.target.value;\n    if(val.trim() === ''){\n        input.value = '';\n    }\n});\n\nbtn.addEventListener('click', async (ev) => {\n    ev.preventDefault();\n    \n    page = 1;\n    if(page === 1){\n        btnMore.style.display = 'none';\n    }\n\n    list.innerHTML = '';\n    val = input.value.trim();\n    if(!val || val.trim() === ''){\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            timeout: 5000, \n            position: 'topRight',\n        })\n\n    } else {\n        try {\n            loader.style.display = '';\n            const response = await findMyFetch(val, page, limit);\n            loader.style.display = 'none';\n\n            if (!response.hits || response.hits.length === 0) {\n                return iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    timeout: 5000,\n                    position: 'topRight',\n                });\n            }\n\n            list.innerHTML = renderImages(response.hits);\n            let newLightbox = new SimpleLightbox('.list a', { \n                captions: true, \n                captionsData: 'alt', \n                captionDelay: 250, \n                animationSlide: true,\n            });\n            newLightbox.refresh();\n\n            const totalPages = Math.ceil(response.totalHits / limit);\n            \n            if (totalPages <= 1) {\n                btnMore.style.display = 'none'; \n            } else {\n                btnMore.style.display = '';\n            }\n\n        } catch (error) {\n            loader.style.display = 'none';\n            return;\n        }\n    }\n});\n\nbtnMore.addEventListener('click', async () => {\n    page += 1;\n    const firstCard = document.querySelector('.list li'); \n    const cardHeight = firstCard.getBoundingClientRect().height;\n    \n    requestAnimationFrame(() => {\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    });\n\n    try {\n        loader.style.display = '';\n        const response = await findMyFetch(val, page, limit, true);\n        loader.style.display = 'none'; \n\n        let newLightbox = new SimpleLightbox('.list a', { \n            captions: true, \n            captionsData: 'alt', \n            captionDelay: 250, \n            animationSlide: true,\n        });\n        newLightbox.refresh();\n\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            requestAnimationFrame(() => {\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth'\n                });\n            });\n        \n        }\n\n        const totalPages = Math.ceil(response.totalHits / limit);\n        if (page >= totalPages) {\n            btnMore.style.display = 'none'; \n            iziToast.info({\n                position: \"topRight\",\n                message: \"You've reached the end of the results\",\n            });\n        } else {\n            btnMore.style.display = ''; \n        }\n        \n    } catch (error) {\n        btnMore.style.display = 'none';\n        console.log(error);\n    }\n});  "],"names":["renderImages","images","imgTemplate","img","loader","list","btnMore","key","baseUrl","findMyFetch","query","page","limit","append","url","data","axios","iziToast","markup","SimpleLightbox","error","input","btn","val","ev","response","firstCard","cardHeight","totalPages"],"mappings":"owBAAa,SAAS,cAAc,OAAO,EAEpC,SAASA,EAAaC,EAAQ,CACjC,OAAOA,EAAO,IAAIC,CAAW,EAAE,KAAK,EAAE,CAE1C,CAEO,SAASA,EAAYC,EAAK,CAC7B,MAAO;AAAA;AAAA;AAAA,uBAGYA,EAAI,aAAa;AAAA,4BACZA,EAAI,YAAY,yBAAyBA,EAAI,IAAI,YAAYA,EAAI,IAAI;AAAA;AAAA;AAAA,6CAGpDA,EAAI,KAAK;AAAA,6CACTA,EAAI,KAAK;AAAA,gDACNA,EAAI,QAAQ;AAAA,iDACXA,EAAI,SAAS;AAAA;AAAA;AAAA,cAI9D,CCfA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,WAAW,EAIlDA,EAAQ,MAAM,QAAU,OACpBF,IAAQA,EAAO,MAAM,QAAU,QAEnC,MAAMG,EAAM,qCACNC,EAAU,2BAET,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAQ,GAAIC,EAAS,GAAO,CAEvET,IAAQA,EAAO,MAAM,QAAU,IAEnC,MAAMU,EAAM,GAAGN,CAAO,QAAQD,CAAG,MAAM,mBAAmBG,CAAK,CAAC,qEAAqEE,CAAK,SAASD,CAAI,GAEvJ,GAAI,CAEA,MAAMI,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAItB,GAFIV,IAAQA,EAAO,MAAM,QAAU,QAE/B,CAACW,EAAK,MAAQA,EAAK,KAAK,SAAW,EAAG,CAEtCT,EAAQ,MAAM,QAAU,OACxBW,EAAS,MAAM,CACX,QAAS,2EACT,QAAS,IACT,SAAU,UAC1B,CAAa,EACD,MACZ,KAAe,CACH,MAAMC,EAASlB,EAAae,EAAK,IAAI,EACjCF,EACAR,EAAK,mBAAmB,YAAaa,CAAM,EAE3Cb,EAAK,UAAYa,EAGJ,IAAIC,EAAe,UAAW,CAC3C,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,EAChC,CAAa,EACQ,QAAO,EAChBb,EAAQ,MAAM,QAAU,EAC3B,CAED,OAAOS,CACV,OAAOK,EAAO,CACXd,EAAQ,MAAM,QAAU,OACxBW,EAAS,MAAM,CACX,QAASG,EAAM,QACf,QAAS,IACT,SAAU,UACtB,CAAS,EACGhB,IAAQA,EAAO,MAAM,QAAU,OACtC,CACL,CC7DA,MAAMiB,EAAQ,SAAS,cAAc,OAAO,EACtChB,EAAO,SAAS,cAAc,OAAO,EACrCiB,EAAM,SAAS,cAAc,SAAS,EACtClB,EAAS,SAAS,cAAc,SAAS,EACzCE,EAAU,SAAS,cAAc,WAAW,EAElDA,EAAQ,MAAM,QAAU,OAExBF,EAAO,MAAM,QAAU,OACvB,IAAIO,EAAO,EACPC,EAAQ,GACRW,EAAM,GAIVF,EAAM,iBAAiB,QAASG,GAAK,CACjCD,EAAMC,EAAG,OAAO,MACbD,EAAI,KAAM,IAAK,KACdF,EAAM,MAAQ,GAEtB,CAAC,EAEDC,EAAI,iBAAiB,QAAS,MAAOE,GAAO,CAUxC,GATAA,EAAG,eAAc,EAEjBb,EAAO,EACJA,IAAS,IACRL,EAAQ,MAAM,QAAU,QAG5BD,EAAK,UAAY,GACjBkB,EAAMF,EAAM,MAAM,OACf,CAACE,GAAOA,EAAI,KAAI,IAAO,GACtB,OAAON,EAAS,MAAM,CAClB,QAAS,2EACT,QAAS,IACT,SAAU,UACtB,CAAS,EAGD,GAAI,CACAb,EAAO,MAAM,QAAU,GACvB,MAAMqB,EAAW,MAAMhB,EAAYc,EAAKZ,EAAMC,CAAK,EAGnD,GAFAR,EAAO,MAAM,QAAU,OAEnB,CAACqB,EAAS,MAAQA,EAAS,KAAK,SAAW,EAC3C,OAAOR,EAAS,MAAM,CAClB,QAAS,2EACT,QAAS,IACT,SAAU,UAC9B,CAAiB,EAGLZ,EAAK,UAAYL,EAAayB,EAAS,IAAI,EACzB,IAAIN,EAAe,UAAW,CAC5C,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,EAChC,CAAa,EACW,QAAO,EAEA,KAAK,KAAKM,EAAS,UAAYb,CAAK,GAErC,EACdN,EAAQ,MAAM,QAAU,OAExBA,EAAQ,MAAM,QAAU,EAG/B,MAAe,CACZF,EAAO,MAAM,QAAU,OACvB,MACH,CAET,CAAC,EAEDE,EAAQ,iBAAiB,QAAS,SAAY,CAC1CK,GAAQ,EACR,MAAMe,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAaD,EAAU,sBAAqB,EAAG,OAErD,sBAAsB,IAAM,CACxB,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACT,CAAK,EAED,GAAI,CACAvB,EAAO,MAAM,QAAU,GACvB,MAAMqB,EAAW,MAAMhB,EAAYc,EAAKZ,EAAMC,EAAO,EAAI,EAWzD,GAVAR,EAAO,MAAM,QAAU,OAEL,IAAIe,EAAe,UAAW,CAC5C,SAAU,GACV,aAAc,MACd,aAAc,IACd,eAAgB,EAC5B,CAAS,EACW,QAAO,EAEfO,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,sBAAsB,IAAM,CACxB,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QAC9B,CAAiB,CACjB,CAAa,CAEJ,CAED,MAAMC,EAAa,KAAK,KAAKH,EAAS,UAAYb,CAAK,EACnDD,GAAQiB,GACRtB,EAAQ,MAAM,QAAU,OACxBW,EAAS,KAAK,CACV,SAAU,WACV,QAAS,uCACzB,CAAa,GAEDX,EAAQ,MAAM,QAAU,EAG/B,OAAQc,EAAO,CACZd,EAAQ,MAAM,QAAU,OACxB,QAAQ,IAAIc,CAAK,CACpB,CACL,CAAC"}