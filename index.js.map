{"version":3,"file":"index.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.list');\n\nexport function renderImages(images) {\n    return images.map(imgTemplate).join('');\n\n}\n\nexport function imgTemplate(img) {\n    return `\n    <li class='elem-list'>\n        <div class=\"gallery\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" title=\"${img.tags}\" class='image'/>\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${img.likes}</p>\n                <p><strong>Views:</strong> ${img.views}</p>\n                <p><strong>Comments:</strong> ${img.comments}</p>\n                <p><strong>Downloads:</strong> ${img.downloads}</p>\n            </div>\n        </div>\n        </li>`;\n}","import { renderImages } from './render-function.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\n\nconst loader = document.querySelector('.loader');\nconst list = document.querySelector('.list'); \nconst btnMore = document.querySelector('.btn-more');\n\nlet page = 1;\nlet limit = 20;\nbtnMore.style.display = 'none';\nif (loader) loader.style.display = 'none';\n\nconst key = '48428320-38598d28b4d5228a2fffcb2e3'; \nconst baseUrl = 'https://pixabay.com/api/';\n\nexport async function findMyFetch(query, page = 1, limit = 20, append = false) {\n\n    if (loader) loader.style.display = ''; \n    \n    const url = `${baseUrl}?key=${key}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${limit}&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        const data = response.data; \n\n        if (loader) loader.style.display = 'none';\n\n        if (!data.hits || data.hits.length === 0) {\n            list.innerHTML = '';\n            btnMore.style.display = 'none';\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                timeout: 5000, \n                position: 'topRight',\n            });\n            return;\n        } else {\n            const markup = renderImages(data.hits);\n            if (append) {\n                list.insertAdjacentHTML('beforeend', markup);\n            } else {\n                list.innerHTML = markup;\n            }\n\n            const lightbox = new SimpleLightbox('.list a', { \n                captions: true, \n                captionsData: 'alt', \n                captionDelay: 250, \n                animationSlide: true, \n            });\n            btnMore.style.display = '';\n            lightbox.refresh();\n        }\n\n        return data;\n    } catch(error) {\n        btnMore.style.display = 'none';\n        iziToast.error({\n            message: error.message,\n            timeout: 5000, \n            position: 'topRight',\n        });\n        if (loader) loader.style.display = 'none';\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport { findMyFetch } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-function.js';\n\nconst input = document.querySelector('#text');\nconst list = document.querySelector('.list'); \nconst btn = document.querySelector('.search');\nconst loader = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn-more');\n\nbtnMore.style.display = 'none';\n\nloader.style.display = 'none';\nlet page = 1;\nlet limit = 20;\n\nlet val = '';\n\ninput.addEventListener('input', ev =>{\n    val = ev.target.value;\n    if(val.trim() === ''){\n        input.value = '';\n    }\n});\n\nbtn.addEventListener('click', ev => {\n    ev.preventDefault();\n    page = 1;\n    if(val.length === 0 || val.trim() === ''){\n        list.innerHTML = '';\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            timeout: 5000, \n            position: 'topRight',\n        })\n    } else{\n        list.innerHTML = '';\n        findMyFetch(val, page, limit);\n    }\n});\n\nbtnMore.addEventListener('click', async () => {\n    page += 1; \n    try {\n        if(loader) loader.style.display = '';\n        const response = await findMyFetch(val, page, limit, true);\n        if (loader) loader.style.display = 'none'; \n\n        const markup = renderImages(response.hits);\n        list.insertAdjacentHTML('beforeend', markup);\n\n        const firstCard = document.querySelector('.list li'); \n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n\n        const totalPages = Math.ceil(response.totalHits / limit);\n        if (page >= totalPages) {\n            btnMore.style.display = 'none'; \n            iziToast.info({\n                position: \"topRight\",\n                message: \"You've reached the end of the results\",\n            });\n        } else {\n            btnMore.style.display = ''; \n        }\n        const lightbox = new SimpleLightbox('.list a', { \n            captions: true, \n            captionsData: 'alt', \n            captionDelay: 250, \n            animationSlide: true, \n        });\n        lightbox.refresh(); \n    } catch (error) {\n        btnMore.style.display = 'none';\n        console.log(error);\n    }\n});"],"names":["renderImages","images","imgTemplate","img","loader","list","btnMore","key","baseUrl","findMyFetch","query","page","limit","append","url","data","axios","iziToast","markup","lightbox","SimpleLightbox","error","input","btn","val","ev","response","firstCard","cardHeight","totalPages"],"mappings":"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"}